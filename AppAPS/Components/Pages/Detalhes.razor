@page "/detalhes/{Id}"
@using AppAPS.DTOs
@using AppAPS.Entities
@using AppAPS.Interfaces
@using AutoMapper

<style>
    .fluent-label {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .fluent-label-nome {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 1;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>

<PageTitle>Página inicial</PageTitle>


<FluentStack Style="display: flex; align-items: center; justify-content: center">
    <FluentCard Width="100%" Height="90%">
        <FluentStack @* Style="background-color: blue" *@>
            <FluentStack @* Style="background-color: red" *@>
                <FluentCard Style="padding: 0;" Width="100%" Height="100%">
                    <img src="@Produto.NomeArquivoUpload" style="object-fit: cover; height: 60vh; width: 100%" />
                </FluentCard>
            </FluentStack>
            <FluentStack Style="@* background-color: green *@; display: flex; flex-direction: column; padding: 10px">
                <FluentStack HorizontalAlignment="HorizontalAlignment.Center">
                    <FluentLabel Typo="Typography.H2">@Produto.Nome</FluentLabel>
                </FluentStack>
                <FluentLabel Typo="Typography.Subject">@Produto.Descricao</FluentLabel>
                <FluentDivider/>
                <FluentStack>
                        <FluentLabel Typo="Typography.H5" Style="margin-top: 3px">Quantidade:</FluentLabel>
                    <FluentNumberField @bind-Value="@Numero" Size="1" Min="0"></FluentNumberField>
                    <FluentButton IconStart="@(new Icons.Regular.Size20.Cart())" Appearance="Appearance.Accent"></FluentButton>
                </FluentStack>
            </FluentStack>
        </FluentStack>
    </FluentCard>
</FluentStack>
<FluentCard Style="margin-top: 20px">
    <Produtos />
</FluentCard>

    @code {
    [Parameter] public string Id { get; set; }
    [Inject] private IProdutoService produtoService { get; set; }
    [Inject] private IMapper mapper { get; set; }
    public Produto Produto;
    public decimal Numero { get; set; }
    public int IdProduto { get; set; }

    protected override Task OnInitializedAsync()
    {
        IdProduto = Convert.ToInt32(Id);
        Produto = produtoService.GetByIdProdutos(IdProduto);
        return Task.CompletedTask;
    }
}
